<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-06-28">

<title>R &amp; Socio Econ</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./industry.html">5 産業連関データ</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R &amp; Soc Econ</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rで社会経済データの取得 (Work in progress)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. RStudio, tidyverseを使う</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MacroData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. マクロ・データ</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./micro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 ミクロ・データ</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DemState.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 民主主義・国家データ</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./industry.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">5 産業連関データ</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#産業連関データ" id="toc-産業連関データ" class="nav-link active" data-scroll-target="#産業連関データ">5 産業連関データ</a>
  <ul class="collapse">
  <li><a href="#国際産業連関分析ツール---exvatoolsindustry-1" id="toc-国際産業連関分析ツール---exvatoolsindustry-1" class="nav-link" data-scroll-target="#国際産業連関分析ツール---exvatoolsindustry-1">5.1 国際産業連関分析ツール - exvatools</a>
  <ul class="collapse">
  <li><a href="#exvatoolsのインストールと投入産出行列の作成" id="toc-exvatoolsのインストールと投入産出行列の作成" class="nav-link" data-scroll-target="#exvatoolsのインストールと投入産出行列の作成">5.1.1 exvatoolsのインストールと投入産出行列の作成</a></li>
  <li><a href="#投入産出行列を操作する" id="toc-投入産出行列を操作する" class="nav-link" data-scroll-target="#投入産出行列を操作する">5.1.2 投入産出行列を操作する</a></li>
  <li><a href="#輸出における付加価値を分解する---韓国の例" id="toc-輸出における付加価値を分解する---韓国の例" class="nav-link" data-scroll-target="#輸出における付加価値を分解する---韓国の例">5.1.3 輸出における付加価値を分解する - <strong>韓国の例</strong></a></li>
  <li><a href="#付加価値の原産地originと目的地destination" id="toc-付加価値の原産地originと目的地destination" class="nav-link" data-scroll-target="#付加価値の原産地originと目的地destination">5.1.4 付加価値の原産地originと目的地destination</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 28, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="産業連関データ" class="level1">
<h1>5 産業連関データ</h1>
<p>本項では、産業間の投入・産出関係を捉える投入産出データを読み込み，分析を容易にするRパッケージを紹介します。Rは行列計算に優れており、もともと投入・産出分析と親和的です。</p>
<p><img src="images/clipboard-2749738558.png" class="img-fluid"></p>
<section id="国際産業連関分析ツール---exvatoolsindustry-1" class="level2">
<h2 class="anchored" data-anchor-id="国際産業連関分析ツール---exvatoolsindustry-1">5.1 国際産業連関分析ツール - exvatools<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></h2>
<p>今日の国際貿易においては生産工程のグローバル化にともない中間財の輸出入が完成品の輸出入以上に盛んに行われています。従来の貿易統計ではそうしたグローバリゼーション現象を十分に捉えることはできませんでした。貿易統計では輸入品の最終出荷地をその原産地として記録します。有名なiPhoneの例では中国が最終出荷地（原産地）ですが，iPhoneという完成品が部品を含めてすべて中国で製造されたかのように扱うことは，生産工程がグローバル化した現代では妥当な取り扱いとは言えません。異なる国の異なるセクターが互いにどのように相互作用しているかを捉えるためには国際産業連関表を利用した付加価値貿易の分析が不可欠です<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>。</p>
<p>簡単な数値例で考えてみましょう。中国が日本から90ドル分の中間財タッチパネルを輸入し、アメリカに最終完成製品iPadを100ドルで輸出したとします。これまでのグロスベースの貿易統計では日本の貿易統計には中国への輸出によって生み出された90ドルの価値が計上されます。同時に、中国の貿易統計にはアメリカに完成品iPadを輸出したことによって100ドルの価値が計上されます。この場合、日本が生み出した90の付加価値が、中国の輸出にも含まれて計算され、二重に計上されてしまいます。付加価値貿易では日本の90、中国の（二重計算を避けた）10の付加価値が別個に計上され、各々がアメリカへの輸出となります。</p>
<p>本項で紹介するRパッケージ<code>exvatools</code>はこれまで紹介してきたようなデータへのアクセス・取得のツールではではありませんが，付加価値貿易の分析を容易にする数多くの機能を備えた非常に優れたパッケージです<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>。</p>
<p><code>exvatools</code>は以下の投入産出表を扱うことができます：</p>
<ul>
<li>OECDの付加価値取引データベース(TiVA)が基づいているOECD諸国間の投入産出表(OECD Inter-Country Input-Output: <a href="https://www.oecd.org/sti/ind/inter-country-input-output-tables.htm">ICIO</a>)</li>
<li>世界投入産出表(<a href="https://www.rug.nl/ggdc/valuechain/wiod/">WIOD</a>)</li>
<li>FIGARO EU投入産出表(<a href="https://ec.europa.eu/eurostat/web/esa-supply-use-input-tables/database">EU IC-SUIOT</a>)</li>
<li>ADBマルチリージョン投入産出表(<a href="https://kidb.adb.org/mrio">ADB MRIO</a>)</li>
</ul>
<section id="exvatoolsのインストールと投入産出行列の作成" class="level3">
<h3 class="anchored" data-anchor-id="exvatoolsのインストールと投入産出行列の作成">5.1.1 exvatoolsのインストールと投入産出行列の作成</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exvatoolsのインストール</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"exvatools"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># exvatoolsのロード</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">library</span>(exvatools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>exvatools</code>は，(1)標準的な国際的な投入産出表の原データ, (2) exvatoolsパッケージに含まれるテストデータ, (3)カスタムデータの３種類のデータから基本的な投入産出行列－投入係数行列やレオンチェフの逆行列など－のリストを作成します。</p>
<p>もちろん学習目的にはパッケージ付属の(2)の投入産出データも有益ですが，じっさいに分析に利用するのは(1)標準的な国際的な投入産出表の原データだと思われます。以下の説明では(1)の取り扱いを紹介して行きます。上述のように，<code>exvatools</code>では現在４つのソース－OECD ICIO, WOID, EU IC-SUIOT, およびADB MRIO－がサポートされています。データはカンマ区切りファイル(<code>.csv</code>)、Excelファイル(<code>.xlsx</code>)、またはRデータファイル(<code>.rData</code>)を含む圧縮ファイルとしてサポート機関のWebページに公開されており，直接ダウンロードできます。</p>
<p><strong>1) OECD ICIO</strong></p>
<p>OECD ICIOテーブルを使用する場合は、<a href="https://www.google.com/search?q=OECD+ICIO+tables">ICIO Webページ</a>からソースファイル<code>2016-2020.zip</code>をコンピュータにダウンロードします。ここで注意を要するのは，<code>make_wio()</code>関数を利用したwioクラスのオブジェクトの作成にあたってはダウンロードしたファイルが<code>zip形式</code>でなければならないということです。そこでzipを解凍せずに，フォルダに保存します。</p>
<p>それでは<code>evatools</code>の<code>make_wio()</code>コマンドを使用し，ソースファイルすなわちダウンロードした<code>zip</code>ファイルから標準的な<strong>投入産出行列</strong>を作成します。<code>make_wio()</code>の基本的な文法は次のようになります：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_wio</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">wiotype =</span> <span class="st">" "</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">src_dir =</span> <span class="cn">NULL</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">FALSE</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>make_wio( )</code>は上述のように，５つの引数をとりますが，とくに<code>wiotype</code>が重要です。<code>wiotype</code>の引数は具体的には以下のようになります,</p>
<ul>
<li><p><code>wiotype = " "</code>には利用する投入産出表の名称と版editionを指定する，以下のような文字列を入力します：</p>
<ul>
<li><p>OECD ICIO表の2023年版（1995-2020年）については <code>"icio2023"</code>，同一版の小型版については <code>"icio2023s"</code></p></li>
<li><p>2016年版WIOD表（2000-2014）については <code>"wiod2016"</code> . 長期WIOD表（1965-2000年）の2022年版については <code>"lrwiod2022"</code>. 後者は歴史分析に有益.</p></li>
<li><p>FIGARO EU投入産出表（EU IC-SUI）の2023年版, industry-by-industry(2010-2021)については<code>"figaro2023i"</code>, また同データベースのproduct-by-productバージョンについては<code>"figaro2023p"</code>.</p></li>
<li><p>2023年版の62カ国ADB MRIO表の2023版については<code>"mrio2023"</code>, 不変価格の同一版については<code>"mrio2023k"</code>, 72カ国版（2022年まで）については<code>"mrio2023x"</code>.</p></li>
</ul></li>
<li><p>year = : 参照年を指定する整数を入力. NULL(デフォルト)の場合，利用可能な最新年が指定される.</p></li>
<li><p>src_dir = : 国際投入産出表のソースファイルが保存されているユーザーのディレクトリ（フォルダ）を指定する文字列を入力. ソースファイルは通常<code>zip</code>ファイルもしくはcsv, xlsxファイル. <code>make_wio()</code>を利用するさいにはファイルの名称を変更しないこと. また<code>scr_dir</code>が指定されない場合，make_wio()は作業ディレクトリ内を探します.</p></li>
</ul>
<p>以下の例では，wiotypeに”icio2023”, yearに”2020”, src_dirに”C:/Users/data”（ソースzipファイルが保存されている架空のフォルダ）を指定しています。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>wio <span class="ot">&lt;-</span> <span class="fu">make_wio</span>(<span class="at">wiotype =</span> <span class="st">"icio2023"</span>, </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">year =</span> <span class="dv">2020</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">src_dir =</span> <span class="st">"C:/Users/data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これによって<code>exvatools</code>が，<code>zip</code>ファイルから<code>.csv</code>ファイルを取り出し，基本的な投入産出行列を作成します。そしてデータを割り当て演算子（<code>←</code>）によって<code>wio</code>と名付けたオブジェクトに格納しています。これによって基本的な投入産出テーブルのリストからなる<code>wioクラス</code>オブジェクトが作成されます。。</p>
<p>作成された<code>wio</code>オブジェクトの内容は<code>summary()</code>関数でチェックできます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>summary(wio)</code>の実行によって以下のリストがコンソール画面に表示されます.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/スクリーンショット 2024-06-04 14.17.16.png" class="img-fluid figure-img"></p>
<figcaption>一部のみ表示.</figcaption>
</figure>
</div>
<p>3645x3645次元の中間財投入行列Zをはじめとし，投入産出分析で利用される行列が作成されます。たとえば，以下の例で利用するグローバル・レオンチェフ逆行列はBという名前になっています。コンソール画面を下にスクロールすると，81カ国，45のセクターが利用可能であることが分かります。また，需要項目として6つが提供されていることも分かります。</p>
<p><strong>2) 世界投入産出表WIOD</strong></p>
<p>WIODについては”wiod2016”（バージョン2016、2000年から2014年）、“wiod2013”、“lrwiod2022”（ロングランWIOD表、バージョン2022、1965年から2000年）が含まれています。これらはすべて、フローニンゲン大学のGrowth and Development Centreの<a href="https://www.rug.nl/ggdc/valuechain/">Webページ</a>から入手可能です。</p>
<p>OECD ICIOの場合と同様に，ダウンロードしたzipファイルを自分のPCのワーキングディレックトリに保存しておきます。以下の例では<code>make_wio()</code>関数の引数<code>src_dir() = NULL</code>です，つまり指定していません。指定しない場合，<code>make_wio()</code>は現在のワーキングディレクトリをチェックします。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>wiod <span class="ot">&lt;-</span> <span class="fu">make_wio</span>(<span class="at">wiotype =</span> <span class="st">"wiod2016"</span>, <span class="at">year =</span> <span class="dv">2014</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これによりwioクラスのリスト（基本的な投入産出行列のリスト）を容れたオブジェクト<code>wiod</code>が作成されます。<code>summary()</code>で確認してみましょう。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wiod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/スクリーンショット 2024-06-07 15.10.39.png" class="img-fluid figure-img"></p>
<figcaption>一部のみ表示.</figcaption>
</figure>
</div>
<p><strong>3) FIGARO EU投入産出表</strong></p>
<p>FIGARO EU投入産出テーブルでは製品×製品product by productと産業×産業industry by industryの２つが利用可能です。ここでの例ではproduct by productを利用します。最初に，<a href="https://ec.europa.eu/eurostat/web/esa-supply-use-input-tables/database">Webページ</a><code>Figaro tables: EU inter-country supply, use and input-output tables</code>→ <code>CSV matrix format (FIGARO 2023 edition)</code>→ <code>Annual EU inter-country input-output tables product by producto</code> の<code>2021</code>をダウンロードし，作業ディレクトリに保存しておきます。ファイル名は<code>matrix_eu-ic-io_prod-by-prod_23ed_2021.csv</code>です。</p>
<p>2つのFIGARO EU投入産出テーブルに対応して引数<code>wiotype</code>には次のいずれかを指定します。</p>
<ul>
<li><p>product by productの場合　wiotype = “figaro2023p”</p></li>
<li><p>industry by industryの場合　wiotype = “figaro2023i”</p></li>
</ul>
<p>ここでは<code>product by product</code>を利用しますから，引数<code>wiotype = "figaro2023p"</code>を入力します。これによってcsvファイルから<code>make_wio()</code>関数が投入産出分析のために必要な基本的な行列を作成します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>figaro <span class="ot">&lt;-</span> <span class="fu">make_wio</span>(<span class="at">wiotype =</span> <span class="st">"figaro2023p"</span>, <span class="at">year =</span> <span class="dv">2021</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>figaroと名前をつけたオブジェクトの中に基本的な行列が保管されます。結果を<code>summary(figaro)</code>でみると，次のような行列の一覧が表示されます。</p>
<p><img src="images/スクリーンショット 2024-06-08 10.53.46.png" class="img-fluid"></p>
<p><strong>4) ADB MRIO投入産出表</strong></p>
<p>最初に，<a href="https://kidb.adb.org/mrio">ADB Multiregional Input-Output Database</a>からデータをダウンロードします。ADBでは<code>xlsx</code>形式でデータが提供されています。ここでの例ではADB, MRIO, 62economicesバージョンの<code>"ADB MRIO(2014)(Updated on June 2022)"xlsx</code>ファイルをダウンロードします。その上で，<code>make_wio()</code>関数を使って行列を作成し，mrioと名前をつけたオブジェクトに容れます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mrio <span class="ot">&lt;-</span> <span class="fu">make_wio</span>(<span class="at">wiotype =</span> <span class="st">"mrio2023"</span>, <span class="at">year =</span> <span class="dv">2014</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>summary(mrio)</code>を使って行列のリストを表示させると，以下のようになります。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/スクリーンショット 2024-06-07 17.10.17.png" class="img-fluid figure-img"></p>
<figcaption>一部のみ表示.</figcaption>
</figure>
</div>
<p>最後に他の投入産出データを読み込む際にも利用する<code>make_wio()</code>関数の引数<code>wiotype</code>に指定するzipファイル（もしくはcsv, Excelファイル名）とエジション名の対応をまとめておきます。</p>
<table class="table">
<colgroup>
<col style="width: 15%">
<col style="width: 62%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>機関名</th>
<th>zip名（csv, xlsxファイル名）</th>
<th>エジション名</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>OECD ICIO</td>
<td>xxxx-xxxx.zip</td>
<td>“icio2023”</td>
</tr>
<tr class="even">
<td>OECD ICIO</td>
<td>ICIO_XXXX-XXXX.zip</td>
<td>“icio2021”</td>
</tr>
<tr class="odd">
<td>OECD ICIO</td>
<td>ICIO2018_XXXX.zip</td>
<td>“icio2018”</td>
</tr>
<tr class="even">
<td>OECD ICIO</td>
<td>ICIO2016_XXXX.zip</td>
<td>“icio2016”</td>
</tr>
<tr class="odd">
<td>WIOT</td>
<td>WIOTS_in_R.zip</td>
<td>“wiod2016”</td>
</tr>
<tr class="even">
<td>EU</td>
<td>matrix_eu-ic-io_prod-by-prod_23ed_2021.csv</td>
<td>“figaro2023p”</td>
</tr>
<tr class="odd">
<td>EU</td>
<td>matrix_eu-ic-io_ind-by-ind_23ed_2021.csv</td>
<td>“figaro2023i”</td>
</tr>
<tr class="even">
<td>ADB</td>
<td>ADB-MRIO-2014_Mar2022.xlsx(62カ国版)</td>
<td>“mrio2023”</td>
</tr>
<tr class="odd">
<td>ADB</td>
<td>ADB-MRIO-2014_(72カ国版)</td>
<td>“mrio2023x”</td>
</tr>
<tr class="even">
<td>ADB</td>
<td>ADB-</td>
<td>“mrio2023k”</td>
</tr>
</tbody>
</table>
<p>ここまで４つの投入産出テーブルをダウンロードし，<code>make_wio()</code>関数を使ってダウンロードしたデータから投入産出分析に必要な行列の作成方法を示してきました。次に，そうした行列を使ったいくつかの操作の例を示して行きます。</p>
</section>
<section id="投入産出行列を操作する" class="level3">
<h3 class="anchored" data-anchor-id="投入産出行列を操作する">5.1.2 投入産出行列を操作する</h3>
<p><strong>exvatools</strong>は、国際投入産出表を取り扱う操作を容易にする複数のコマンドを提供しています<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>。一例を示すと次のような関数があります：</p>
<ul>
<li><code>dmult()</code>：対角行列を行列によって乗数倍する.</li>
<li><code>multd()</code>：行列を対角行列によって乗数倍する.</li>
<li><code>hmult()</code>：行列のアダマール積</li>
<li><code>bkd()</code>：ブロック対角行列－対角ブロックがゼロではなく，非対角ブロックがゼロである行列－を作成.</li>
<li><code>bkoffd()</code>：ブロックオフ対角行列－対角ブロックがゼロであり，非対角ブロックがゼロでない行列－を作成.</li>
<li><code>rsums()</code>: 行を合計する</li>
<li><code>csums()</code>: 列を合計する</li>
<li><code>sumnrow()</code>: 行列のn番目の行を合計する</li>
<li><code>sumncol()</code>: 行列のn番目の列を合計する</li>
</ul>
<p>こうした関数を利用して実際に産業連関表を使って作業してみます。以下の例ではOECD ICIOの投入産出テーブルから作成した，オブジェクトwioに格納された行列を利用し，逆行列の操作，付加価値輸出の計算を行っています：</p>
<ul>
<li>例1 グローバル・レオンチェフの逆行列</li>
<li>例2 付加価値輸出</li>
</ul>
<p><strong>例1　グローバル・レオンチェフ逆行列</strong></p>
<p>レオンチェフ逆行列を利用した需要誘発モデルの基本的な行列は、すでに示したコマンド<code>make_wio()</code>によって原データから簡単に取得できます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>wio <span class="ot">&lt;-</span> <span class="fu">make_wio</span>(<span class="at">wiotype =</span> <span class="st">"icio2023"</span>, <span class="at">year =</span> <span class="cn">NULL</span>, <span class="at">src_dir =</span> <span class="cn">NULL</span>, <span class="at">quiet =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>summary(wio)</code>の表示内容をみると、<code>B</code>がグローバル・レオンチェフ逆行列（Global Leontief inverse)であり、また<code>Y</code>が最終需要です。BもYも<code>make_wio()</code>関数で作成された行列です。<code>class()</code>関数でオブジェクト<code>wio</code>が<code>wioクラス</code>であり，<code>B</code>も<code>Y</code>も行列であることを確認できます。なお，<code>wio$B</code>は「wioオブジェクトの中の行列B」を指しています。</p>
<p><img src="images/スクリーンショット 2024-06-09 14.43.45.png" class="img-fluid" width="181"></p>
<p>レオンチェフ逆行列は，最終需要が1単位増加したときに，直接間接に誘発される生産量を示します。したがってグローバル・レオンチェフ逆行列はある国のあるセクターにおいて最終需要が1単位増加したときに，他セクターの生産量がどれだけ誘発されるか－簡単に言えば，他産業の生産に与える影響の大きさ－を示します。</p>
<p><code>make_wio()</code>関数で作成された行列リストにおいて，<code>A</code>が投入係数行列，<code>X</code>が生産，最終需要が<code>Y</code>です。したがって国際投入産出テーブルは</p>
<p><span class="math inline">\(AX + Y = X\)</span></p>
<p>と表現できます。ここから最終需要と生産の関係は</p>
<p><span class="math inline">\(X = (I-A)^{-1}Y\)</span></p>
<p>この関係は技術を一定とし，一定水準の最終需要<code>Y</code>のために必要とされる，各国の各セクターの産出高<code>X</code>がいかにして生み出されるかを示しています。ここで<span class="math inline">\((I-A)^{-1}\)</span>はグローバル・レオンチェフ逆行列であり，作成された行列リストにおいては<code>B</code>で表記されています。したがって生産<code>X</code>はグローバル・レオンチェフ逆行列<code>B</code>と最終需要<code>Y</code>の積と同じになります。</p>
<p>行列の積の演算子は<code>%*%</code>です。レオンチェフ逆行列と最終需要の積で生産を求めます。そしてその結果を<code>BY</code>と名前をつけたオブジェクトに容れます。<code>BY</code>も行列です。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>BY <span class="ot">&lt;-</span> wio<span class="sc">$</span>B <span class="sc">%*%</span> wio<span class="sc">$</span>Y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>BYとXが一致することを確認してみてください。</p>
<p><strong>グローバル・レオンチェフ行列の行和と列和</strong></p>
<p>次に，グローバル・レオンチェフ行列の<code>行和</code>を求めみます。このためには<code>rsums()</code>関数を利用します。文法は以下のようになります：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rsums</span>(df, <span class="at">col_name =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>・引数<code>df</code>は行と列を持つ行列の名前を入力します。</p>
<p>・引数<code>col_name</code>は作成される列につけられる名前・文字列です。</p>
<p>これを使ってグローバル・レオンチェフ行列の行の合計を求めます。 <code>wio$B</code>は”オブジェクトwioの中の行列B”を意味します，また<code>col_name =</code>で列の名前をFLにしています。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># グローバル・レオンチェフ行列の行和</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rsums</span>(wio<span class="sc">$</span>B, <span class="at">col_name =</span> <span class="st">"FL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これによってセクターと各行の和を得ることができます。たとえば，以下の表ではARG_01T02はアルゼンチン（ARG）の’Agriculture, hunting, forestry’産業, ARG_03は同じくアルゼンチンの’Fishing’産業を意味しています。2021版ではISIC Rev.4をベースにした45産業、17製造業セクター,20サービス産業セクターのデータが収録されています。</p>
<p><img src="images/スクリーンショット 2024-06-09 14.39.58.png" class="img-fluid" width="204"></p>
<p>この行の和を行和全体の平均値で除した比率は「感応度係数」と呼ばれています。</p>
<p>列和も<code>csums()</code>関数を使って同じように求めることができます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># グローバル・レオンチェフ行列の列和</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">csums</span>(wio<span class="sc">$</span>B, <span class="at">row_name =</span> <span class="st">"BL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これによって１行×3645列の，各国の各産業に対応する列和が得られます。レオンチェフ逆行列の列和は<code>後方連関(backward linkage)</code>指数として知られているものです。ちなみに，この産業別の列和を列和全体の平均値で除した比率を求めると，「影響力係数」が求めることができます。</p>
<p><strong>例2　付加価値輸出を計算する</strong></p>
<p>国外に吸収される付加価値(付加価値輸出)を計算するには、1)対角化された付加価値係数行列（wioでは<code>W</code>によって表記）をグローバル逆行列<code>B</code>をによって乗数倍し，2)その結果を最終需要行列<code>Y</code>をによって乗数倍します。こうした操作によって最終需要によって誘発される付加価値が計算できます。</p>
<p>1)の操作には対角行列と行列の積が必要となります。このためには<code>dmult()</code>関数を利用します。使い方は</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dmult</span>(matrix1, matrix2)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a> <span class="co"># matrix1は対角行列</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a> <span class="co"># matrix2は通常の行列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>dmult()</code>関数は対角行列matrix1をベクトルに変換します、つまり対角行列matrix1を、matrix2のすべての行によって水平に乗数倍します。</p>
<p>2) 需要によって誘発されるすべての付加価値を計算するために最終需要Yを掛けます:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>VBY <span class="ot">&lt;-</span> <span class="fu">dmult</span>(wio<span class="sc">$</span>W, wio<span class="sc">$</span>B) <span class="sc">%*%</span> wio<span class="sc">$</span>Y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これによって海外に吸収される付加価値の大きさが分かります。3645行（各国の産業部門数）×77列（Rest of Worldを含めた国の数）の大きな行列であるためコンソール画面では見づらいため<code>Viw(VBY)</code>関数によって表示してみます。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/スクリーンショット 2024-06-09 16.55.01.png" class="img-fluid figure-img"></p>
<figcaption>一部のみ表示.</figcaption>
</figure>
</div>
<p>また海外に吸収される付加価値だけに注目する場合，VBY行列のうちの非対角行列ブロックの表示だけで十分です。その表示ためには<code>bkoffd()</code>関数を利用します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bkoffd</span>(VBY)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これによって対角行列部分，たとえばアルゼンチンの産業を示す行とアルゼンチンという国を示す列のセルはゼロとなり，非対角部分の値だけが表示されます。</p>
</section>
<section id="輸出における付加価値を分解する---韓国の例" class="level3">
<h3 class="anchored" data-anchor-id="輸出における付加価値を分解する---韓国の例">5.1.3 輸出における付加価値を分解する - <strong>韓国の例</strong></h3>
<p>輸出に体化された付加価値の分解にあたっていくつかの方法が提案されていますが，以下のようなステップで分解されます：</p>
<p>最初に<code>総輸出(Gross Exports: EXGR)</code>を，<code>国内コンテンツ（Domestic Content: DC）</code>と<code>外国コンテンツ（Foreign Content: FC）</code>とに分離し、次に<code>国内付加価値（Domestic Value Added: DVA）</code>と<code>外国付加価値（Foreign Value Added: FVA）</code>を特定し、これらを<code>国内ダブルカウント（Domestic Double Counting: DDC）</code>と<code>外国ダブルカウント（Foreign Double Counting: FDC）</code>から分離します。そして最後に国内付加価値を，<code>輸出された付加価値（Value added exported: VAX）</code>と<code>リフレクション（Reflection: REF）</code>とに分割します（以下の図参照）。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/スクリーンショット 2024-06-11 17.17.27.png" class="img-fluid figure-img" width="502"></p>
<figcaption>Feas E (2024), p.223</figcaption>
</figure>
</div>
<p><code>exvatools</code>を使って韓国の付加価値輸出の分解をおこなってみましょう。このためには関数<code>make_exvadec()</code>を使います。この関数によって異なった分解方法を使ってある１つの国もしくは国グループの輸出における付加価値を分解することができます。文法は以下のようになります：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_exvadec</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a> wio_object,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a> <span class="at">exporter =</span> <span class="st">"all"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a> <span class="at">method =</span> <span class="st">"bm_src"</span>, </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a> <span class="at">output =</span> <span class="st">"standard"</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a> <span class="at">quiet =</span> <span class="cn">FALSE</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>基本的な引数は５つです。</p>
<ul>
<li><p>wio_object: <code>make_wio()</code>関数を使って取得した<code>wioクラス</code>のオブジェクト（標準的な世界投入産出表）を指定.</p></li>
<li><p>exporter: 国または国グループを示す文字列（たとえば，“USA”,“NAFTA”など）. デフォルトは”all”であり，利用できるすべての国に関して輸出における付加価値の分解を生み出す.</p></li>
<li><p>method: 輸出付加価値export VAの分解方法を指定する文字列.分解法としては以下の方法が利用可能.</p>
<ul>
<li><p>“bm_src”: Borin and Mancini(2023)にもとづく分解法. ソースベース. デフォルト</p></li>
<li><p>“bm_snk”: Borin and Mancini(2023)にもとづく分解法. sinkベース.</p></li>
<li><p>“wwz”: Wang et al.&nbsp;(2013)にもとづく分解法</p></li>
<li><p>“kww”: Koopman et al.&nbsp;(2014)にもとづく分解法</p></li>
<li><p>“my”: Miroundot and Ye (2021)にもとづく分解法</p></li>
<li><p>“oecd”: OECD</p></li>
</ul></li>
<li><p>output: アウトプットタイプを指定する文字列. 7つのアウトプットが用意されているが，“standard”(デフォルト)で十分.output = “standard”によって<code>DC</code>, <code>DVA</code>,<code>DDC</code>, <code>FC</code>,<code>FVA</code>,<code>VAX</code>が出力される.</p></li>
<li><p>quiet : ブール値であり，TRUEの場合，メッセージは非表示. デフォルトはFALSEである。つまりメッセージが表示される.</p></li>
</ul>
<p>それでは<code>make_exvadec()</code>関数を使って韓国の付加価値輸出の分解をおこなってみます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>kor_exvadec <span class="ot">&lt;-</span> <span class="fu">make_exvadec</span>(wio, <span class="at">exporter =</span> <span class="st">"KOR"</span>, <span class="at">method =</span> <span class="st">"bm_src"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これを実行すると，韓国の付加価値分解の結果が表示されると同時に，結果が<code>kor_exvadec</code>と名付けたオブジェクトの中に格納されます。</p>
<p><img src="images/スクリーンショット 2024-06-10 17.04.35.png" class="img-fluid"></p>
<p>結果から総輸出(EXGR)を100パーセントとした場合，付加価値輸出(VAX)が69.4パーセントと高い割合を占めることが理解されます。韓国経済においては最終完成品の輸出よりも，中間財・部品の輸出の価値がきわめて高水準だということが推測されます。さらに，グローバルバリューチェーンに関連した貿易(GVC)が47.37パーセントを示しており，韓国経済がグローバルサプライチェーンに大きく関わっていることも分かります。</p>
<p><code>exvatools</code>の優れた点として分解を行なったのち，さらに<code>get_exvadec_bkdown()</code>関数を使ってセクターや仕向け国destinationを指定することもできます。以下の例はセクターとして製造業 “NANUF”，仕向け国 importerとして中国 “CHN”を指定しています。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_exvadec_bkdown</span>(kor_exvadec, <span class="at">exporter =</span> <span class="st">"KOR"</span>,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="at">sector =</span> <span class="st">"MANUF"</span>, <span class="at">importer =</span> <span class="st">"CHN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>これを実行すると，中国に向けた製造業輸出の付加価値分解が可能となります。</p>
<p><img src="images/スクリーンショット 2024-06-10 17.40.44.png" class="img-fluid"></p>
<p>結果を見ると，中国への韓国製造業の輸出総額のうち66.80が付加価値輸出だということが理解できます。</p>
<p><strong>OECDのTiVAデータベース</strong>と同様の一般的な貿易指標（輸出，輸入，付加価値，生産等）のリストを取得したい場合は引数に<code>method = "oecd"</code>, <code>output = "tiva"</code>とし、<code>make_exvadec()</code>を実行すると、取得できます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a> kor_tiva <span class="ot">&lt;-</span> <span class="fu">make_exvadec</span>(wio, </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">exporter =</span> <span class="st">"KOR"</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"oecd"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">output =</span> <span class="st">"tiva"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/スクリーンショット 2024-06-13 15.27.10.png" class="img-fluid"></p>
<p>ここには<code>GVCへの参加度</code>指標も出力されます。自国で生産された中間財が，国外の輸出財生産により多く投入されることはGVCへの前方への参加度が高い理解され，<code>GVCへの前方参加度(Forward participation in GVC)</code>と呼ばれます。他方，自国の輸出財の生産にあたって輸入中間財がより多く投入されることはGVCへの後方への参加度が高いと解釈されます。これは<code>GVCへの後方参加度(Backward participation in GVC)</code> と呼ばれます。</p>
<p>韓国の例をみると，GVCへの後方参加度は29.70, 他方GVCへの前方参加度は21.66であり，いずれの参加度も比較的高いのですが，後方への参加度の方が高く，韓国経済の輸出財生産にあたっては他国からの輸入中間財が多く投入されていることが理解できます。</p>
</section>
<section id="付加価値の原産地originと目的地destination" class="level3">
<h3 class="anchored" data-anchor-id="付加価値の原産地originと目的地destination">5.1.4 付加価値の原産地originと目的地destination</h3>
<p><code>make_exvadec()</code>の分解では、付加価値がどこで生み出され(origin)、どこに行き着く(destination)かを分析することはできませんが，<code>make_exvadir()</code>関数を利用すれば、この点も分析できます。</p>
<p>ふたたび、韓国の例を使って考えてみます。韓国の輸出における外国コンテンツForeign Content in VA(FC)は171125.82でした。この国外コンテンツ(FC)はどこから来たのでしょうか。付加価値輸出の地理的な原産地、セクター別原産地の情報は<code>make_exvadir()</code>で取得できます。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>kor_exvadir <span class="ot">&lt;-</span> <span class="fu">make_exvadir</span>(wio, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">exporter =</span> <span class="st">"KOR"</span>,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">va_type =</span> <span class="st">"FC"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">flow_type =</span> <span class="st">"EXGR"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>summary(kor_exvadir)</code>によって詳細を表示させると、</p>
<p><img src="images/スクリーンショット 2024-06-13 15.54.12.png" class="img-fluid"></p>
<p>出力結果をみると，原産地origin国としてROWも含めて77カ国，セクターとしては45セクターが利用可能であることが分かります。</p>
<p><code>FC</code>データはオブジェクト<code>kor_exvadir</code>の中に収納されており，<code>kor_exvadir$FC</code>で表示させることができます。<code>head()関数</code>を使って最初の数行だけ出力します。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>kor_exvadir<span class="sc">$</span>FC <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/スクリーンショット 2024-06-14 16.10.42.png" class="img-fluid"></p>
<p>これによって韓国の付加価値輸出における外国コンテンツ(FC)がどの国の，どのセクターから生まれたものかが理解できます。</p>


</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Feas E (2024). <em>exvatools: Value Added in Exports and Other Input-Output Table Analysis Tools</em>. R package version 0.8.0, <a href="https://CRAN.R-project.org/package=exvatools" class="uri">https://CRAN.R-project.org/package=exvatools</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>付加価値貿易の分析については猪俣哲史著『グローバル・バリューチェーン－新・南北問題へのまなざし』日本経済新聞社，2019を参照してください。<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>exvatoolsの利用法については開発者Feas E (2023) exvatools: Value Added in Exports and Other Input-Output Table Analysis Tools, <em>R Journal</em> Vol. 15/4にもとづいています。<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>詳細についてはexvatoolsの<a href="https://cran.r-project.org/web/packages/exvatools/index.html">Reference manual</a>を参照してください。<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>